---
title: "Atlas of the Birds of Brisbane"
author: |
  | Richard A. Fuller, Jeffrey O. Hanson
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: references.bib
biblio-style: apalike
link-citations: yes
github-repo: bird-team/brisbane-bird-atlas
url: "https://github.com/bird-team/brisbane-birds"
description: "Community bird atlas for Brisbane, Australia"
---

```{r, include = FALSE}
# set default options
knitr::opts_chunk$set(message = FALSE, warning = FALSE, echo = FALSE,
                      results = "asis", fig.align = "centre")
```

# Preface

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sed justo nunc. In in cursus turpis, sollicitudin pellentesque lacus. Aliquam et orci malesuada, tristique justo quis, feugiat ex. Phasellus at sem sit amet sapien consequat fringilla. Praesent pretium aliquet ante, eu maximus augue placerat ut. Donec odio erat, vehicula non accumsan quis, ultricies eu arcu. Aliquam erat volutpat.

In hac habitasse platea dictumst. Nullam lacus elit, luctus a cursus ut, tempus id arcu. Quisque ornare eleifend augue, ac aliquet sapien posuere porttitor. Nam lacinia, diam at molestie tempor, erat ligula vulputate ligula, id rutrum magna justo in lorem. Vivamus posuere risus augue. Ut velit elit, hendrerit sit amet lacus nec, mattis commodo neque. Cras vel felis sed purus sollicitudin pharetra eu eget arcu. In volutpat eleifend mauris, sed porta nunc dapibus a. Suspendisse fringilla tempus quam a fermentum. Morbi quis lacus nec eros maximus interdum. Nullam venenatis vehicula magna, a egestas est ornare vel. Fusce quis luctus orci, eget congue dolor. Morbi luctus est justo, quis porttitor lacus facilisis sit amet.

```{r, include = FALSE}
# Initialization
## set default options
options(stringsAsFactors = FALSE)

## set parameters
species_path <- dir("data/species", "^.*\\.xlsx", full.names = TRUE)[1]

## source functions
source("code/functions/format_species_data.R")
source("code/functions/render_species_graph.R")
source("code/functions/render_species_map.R")
source("code/functions/render_species_widget.R")

# Preliminary processing
## load parameters
parameters <- yaml::read_yaml("data/parameters/parameters.yaml")

## load data
species_data <- readxl::read_excel(species_path, sheet = 1)

# Main processing
## format species data
species_data <- do.call(format_species_data,
                        append(list(x = species_data), parameters$species))
```
